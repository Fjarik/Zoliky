@using DataAccess
@using DataAccess.Models
@using SharedLibrary.Shared
@using ZolikyWeb.Tools
@{
	Layout = "~/Views/Shared/Dashboard/_LayoutDashboard.cshtml";
	var style = "";
	if (DateTime.Today.IsPrideTime()) {
		style = $"/*background-image: url({Url.Content("~/Content/Images/Header/WebNavBKG.svg")});*//*background-color: #1e88e5;*/";
	}
	var profile = Url.GetCurrentUserProfilePhotoUrl();
}

@section styles {
	@RenderSection("styles", false)
}

@section header{
	@RenderSection("header", false)
}

<!-- ============================================================== -->
<!-- Topbar header - style you can find in pages.scss -->
<!-- ============================================================== -->
<header class="topbar" style="@style">
	<nav class="navbar top-navbar navbar-expand-md navbar-light">
		<!-- ============================================================== -->
		<!-- Logo -->
		<!-- ============================================================== -->
		<div class="navbar-header">
			<a class="navbar-brand" href="@Url.Action("Dashboard", "Main", new { Area = "App" })">
				<!-- Logo icon -->
				<strong style="display: none;">
					<!--You can put here icon as well // <i class="wi wi-sunset"></i> //-->
					<!-- Dark Logo icon -->
					<img src="@Url.Content("~/Content/Images/Icons/Logo/ZolikyIconBlack_50.png")" alt="homepage" class="dark-logo" />
					<!-- Light Logo icon -->
						<img src="@Url.Content("~/Content/Images/Icons/Logo/ZolikyIconWhite_50.png")" alt="homepage" class="light-logo" />
				</strong>
				<!--End Logo icon -->
				<!-- Logo text -->
				<span>
					<!-- dark Logo text -->
					<img src="@Url.Content("~/Content/Images/Header/ZolikyHeaderBlack_1024.png")" alt="homepage" class="dark-logo" />
					<!-- Light Logo text -->
					<img src="@Url.Content("~/Content/Images/Header/ZolikyHeaderWhite_1024.png")" class="light-logo" alt="homepage" />
				</span>
			</a>
		</div>
		<!-- ============================================================== -->
		<!-- End Logo -->
		<!-- ============================================================== -->
		<div class="navbar-collapse">
			<!-- ============================================================== -->
			<!-- toggle and nav items -->
			<!-- ============================================================== -->
			<ul class="navbar-nav mr-auto mt-md-0">
				<!-- This is  -->
				<li class="nav-item">
					<a class="nav-link nav-toggler hidden-md-up text-muted" href="javascript:void(0)">
						<i class="mdi mdi-menu"></i>
					</a>
				</li>
				<li class="nav-item">
					<a class="nav-link sidebartoggler hidden-sm-down text-muted" href="javascript:void(0)">
						<i class="ti-menu"></i>
					</a>
				</li>
				<!-- School -->
				<li class="nav-item">
					@*<a class="nav-link text-muted" href="@Url.Action()">
					@this.User.Identity.GetSchoolName()
					</a>*@
					<span class="nav-link text-white NoSelect">
						@this.User.Identity.GetSchoolName()
					</span>
				</li>
			</ul>
			<!-- ============================================================== -->
			<!-- User profile and search -->
			<!-- ============================================================== -->
			<ul class="navbar-nav my-lg-0">
				<!-- ============================================================== -->
				<!-- Notifications -->
				<!-- ============================================================== -->
				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle text-muted text-muted waves-effect waves-dark" href="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						<i class="mdi mdi-bell"></i>
						@if (ViewBag.Notify == true) {
							<div class="notify">
								<span class="heartbit"></span>
								<span class="point"></span>
							</div>
						}
					</a>
					<div class="dropdown-menu dropdown-menu-right mailbox scale-up">
						<ul>
							<li>
								<div class="drop-title">Oznámení</div>
							</li>
							<li>
								<div class="message-center">
									@if (ViewBag.Notifications is List<Notification> notifs) {
										foreach (var notif in notifs) {
											<a href="@Url.Action("", "", new {Area = "App", id = notif.ID})">
												<div class="btn btn-danger btn-circle">
													<i class="fa fa-link"></i>
												</div>
												<div class="mail-contnet">
													<h5>@notif.Title</h5> 
													<span class="mail-desc">@notif.Content</span> 
													<span class="time">@notif.Created.ToString("dd.MM HH:MM")</span>
												</div>
											</a>
										}
									} else {
										<div class="text-center my-3">
											Aktuálně nejsou k zobrazení žádné notifikace
										</div>
									}
									<!-- Message -->
									@*<a href="#">
										<div class="btn btn-danger btn-circle">
											<i class="fa fa-link"></i>
										</div>
										<div class="mail-contnet">
											<h5>Luanch Admin</h5> 
											<span class="mail-desc">Just see the my new admin!</span> 
											<span class="time">9:30 AM</span>
										</div>
									</a>
									<!-- Message -->
									<a href="#">
										<div class="btn btn-success btn-circle">
											<i class="ti-calendar"></i>
										</div>
										<div class="mail-contnet">
											<h5>Event today</h5> 
											<span class="mail-desc">Just a reminder that you have event</span> 
											<span class="time">9:10 AM</span>
										</div>
									</a>
									<!-- Message -->
									<a href="#">
										<div class="btn btn-info btn-circle">
											<i class="ti-settings"></i>
										</div>
										<div class="mail-contnet">
											<h5>Settings</h5> 
											<span class="mail-desc">You can customize this template as you want</span> 
											<span class="time">9:08 AM</span>
										</div>
									</a>
									<!-- Message -->
									<a href="#">
										<div class="btn btn-primary btn-circle"><i class="ti-user"></i></div>
										<div class="mail-contnet">
											<h5>Pavan kumar</h5> <span class="mail-desc">Just see the my admin!</span> <span class="time">9:02 AM</span>
										</div>
									</a>*@
								</div>
							</li>
							<li>
								<a class="nav-link text-center" href="javascript:void(0);">
									<strong>Zobrazit všechny notifikace</strong>
									<i class="fa fa-angle-right"></i>
								</a>
							</li>
						</ul>
					</div>
				</li>
				<!-- ============================================================== -->
				<!-- End Notifications -->
				<!-- ============================================================== -->
				<!-- ============================================================== -->
				<!-- Profile -->
				<!-- ============================================================== -->
				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle text-muted waves-effect waves-dark" href="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><img src="@profile" alt="user" class="profile-pic" /></a>
					<div class="dropdown-menu dropdown-menu-right scale-up">
						<ul class="dropdown-user">
							<li>
								<div class="dw-user-box">
									<div class="u-img"><img src="@profile" alt="user"></div>
									<div class="u-text" style="width: calc(100% - 90px);">
										<h4>
											@User.Identity.Name
										</h4>
										<p class="text-muted">@User.Identity.GetClassName()</p>
										<p class="text-muted" title="@User.Identity.GetSchoolName()" style="text-overflow: ellipsis; white-space: nowrap; overflow: hidden;">@User.Identity.GetSchoolName()</p>
										@if (User.Identity.IsTester()) {
											<p class="text-muted">Tester</p>
										}
									</div>
								</div>
							</li>
							<li role="separator" class="divider"></li>
							<li><a href="#"><i class="ti-user"></i> Profil</a></li>
							<li><a href="#"><i class="mdi mdi-trophy-outline"></i> Achievementy</a></li>
							<li><a href="@Url.Action("LoginHistory","Account", new { Area = "App" })"><i class="mdi mdi-history"></i> Historie</a></li>
							<li role="separator" class="divider"></li>
							<li><a href="@Url.Action("Settings", "Account", new {Area = "App"})"><i class="ti-settings"></i> Nastavení</a></li>
							<li role="separator" class="divider"></li>
							<li>@Html.Partial("~/Views/Shared/Dashboard/_LogoutDrop.cshtml", "")</li>
						</ul>
					</div>
				</li>
			</ul>
		</div>
	</nav>
</header>
<!-- ============================================================== -->
<!-- End Topbar header -->
<!-- ============================================================== -->
<!-- ============================================================== -->
<!-- Left Sidebar - style you can find in sidebar.scss  -->
<!-- ============================================================== -->
<aside class="left-sidebar NoSelectAll">
	<!-- Sidebar scroll-->
	<div class="scroll-sidebar">
		<!-- User profile -->
		<div class="user-profile" style="background: url(@Url.Content("~/assets/images/background/user-info.jpg")) no-repeat;">
			<!-- User profile image -->
			<div class="profile-img">
				<img src="@profile" alt="user" />
			</div>
			<!-- User profile text-->
			<div class="profile-text">
				<a href="#" class="dropdown-toggle u-dropdown" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="true">
					@User.Identity.Name @(User.Identity.IsTester() ? "(Tester)" : "")
				</a>
				<div class="dropdown-menu animated">
					<a href="#" class="dropdown-item">
						<i class="ti-user"></i> Profil
					</a> 
					<div class="dropdown-divider"></div> 
					<a href="@Url.Action("Settings", "Account", new {Area = "App"})" class="dropdown-item">
						<i class="ti-settings"></i> Nastavení
					</a>
					<div class="dropdown-divider"></div> 
					@Html.Partial("~/Views/Shared/Dashboard/_LogoutDrop.cshtml", "dropdown-item")
				</div>
			</div>
		</div>
		<!-- End User profile text-->
		<!-- Sidebar navigation-->
		<nav class="sidebar-nav">
			<ul id="sidebarnav">				
				@RenderSection("menu", true)
			</ul>
		</nav>
		<!-- End Sidebar navigation -->
	</div>
	<!-- End Sidebar scroll-->
	<!-- Bottom points-->
	<div class="sidebar-footer">
		<!-- item-->
		<a href="@Url.Action("Mobile", "Main", new {Area = "App"})" class="link" data-toggle="tooltip" title="Mobilní aplikace">
			<i class="ti-download"></i>
		</a>
		<!-- item-->
		<a href="@Url.Action("Settings", "Account", new {Area = "App"})" class="link" data-toggle="tooltip" title="Nastavení">
			<i class="ti-settings"></i>
		</a>
		<!-- item-->
		@using (Html.BeginForm("Logout", "Account", new {Area = ""}, FormMethod.Post, new {id = "logOutForm"})) {
			@Html.AntiForgeryToken()
			<a href="javascript:$('#logOutForm').submit();" class="link" data-toggle="tooltip" title="Odhlásit se">
				<i class="mdi mdi-power"></i>
			</a>
		}
	</div>
	<!-- End Bottom points-->
</aside>
<!-- ============================================================== -->
<!-- End Left Sidebar - style you can find in sidebar.scss  -->
<!-- ============================================================== -->
<!-- ============================================================== -->
<!-- Page wrapper  -->
<!-- ============================================================== -->
<div class="page-wrapper">
	<!-- ============================================================== -->
	<!-- Container fluid  -->
	<!-- ============================================================== -->
	<div class="container-fluid">
		<!-- ============================================================== -->
		<!-- Bread crumb and right sidebar toggle -->
		<!-- ============================================================== -->
		<div class="row page-titles">
			<div class="col-md-5 col-8 align-self-center">
				<h3 class="text-themecolor">@ViewBag.Title</h3>
			</div>
		</div>
		<!-- ============================================================== -->
		<!-- End Bread crumb and right sidebar toggle -->
		<!-- ============================================================== -->
		<!-- ============================================================== -->
		<!-- Start Page Content -->
		<!-- ============================================================== -->
		@RenderBody()
		<!-- ============================================================== -->
		<!-- End Page Content -->
		<!-- ============================================================== -->
		<!-- ============================================================== -->
		<!-- Right sidebar -->
		<!-- ============================================================== -->
		<!-- .right-sidebar -->
		<div class="right-sidebar">
			<div class="slimscrollright">
				<div class="rpanel-title">
					Nastavení
					<span>
						<i class="ti-close right-side-toggle"></i>
					</span>
				</div>
				<div class="r-panel-body">
					<ul id="themecolors" class="m-t-20">
						<li>
							<b>With Light sidebar</b>
						</li>
						<li>
							<a href="javascript:void(0)" data-theme="default" class="default-theme">1</a>
						</li>
						<li>
							<a href="javascript:void(0)" data-theme="green" class="green-theme">2</a>
						</li>
						<li>
							<a href="javascript:void(0)" data-theme="red" class="red-theme">3</a>
						</li>
						<li>
							<a href="javascript:void(0)" data-theme="blue" class="blue-theme working">4</a>
						</li>
						<li>
							<a href="javascript:void(0)" data-theme="purple" class="purple-theme">5</a>
						</li>
						<li>
							<a href="javascript:void(0)" data-theme="megna" class="megna-theme">6</a>
						</li>
						<li class="d-block m-t-30">
							<b>With Dark sidebar</b>
						</li>
						<li>
							<a href="javascript:void(0)" data-theme="default-dark" class="default-dark-theme">7</a>
						</li>
						<li>
							<a href="javascript:void(0)" data-theme="green-dark" class="green-dark-theme">8</a>
						</li>
						<li>
							<a href="javascript:void(0)" data-theme="red-dark" class="red-dark-theme">9</a>
						</li>
						<li>
							<a href="javascript:void(0)" data-theme="blue-dark" class="blue-dark-theme">10</a>
						</li>
						<li>
							<a href="javascript:void(0)" data-theme="purple-dark" class="purple-dark-theme">11</a>
						</li>
						<li>
							<a href="javascript:void(0)" data-theme="megna-dark" class="megna-dark-theme ">12</a>
						</li>
					</ul>
				</div>
			</div>
		</div>
		<!-- ============================================================== -->
		<!-- End Right sidebar -->
		<!-- ============================================================== -->
	</div>
	<!-- ============================================================== -->
	<!-- End Container fluid  -->
	<!-- ============================================================== -->
	<!-- ============================================================== -->
	<!-- footer -->
	<!-- ============================================================== -->
	<footer class="footer">
		&copy; Žolíky @DateTime.Today.Year
		|
		<a title="Seznam změn" href="@Url.Action("Changelog", "Home", new { Area = "" })" data-toggle="tooltip" >
			v.@Globals.VersionTrunc
		</a>
	</footer>
	<!-- ============================================================== -->
	<!-- End footer -->
	<!-- ============================================================== -->
</div>
<!-- ============================================================== -->
<!-- End Page wrapper  -->
<!-- ============================================================== -->


@section scripts {
	@RenderSection("scripts", false)
}

@section footer {
	@RenderSection("footer", false)
}